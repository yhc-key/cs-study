# ðŸ“ŒNetwork Layer
![NetworkLayer](img/NetworkLayer.png)
ì–´ë–»ê²Œ ì´ë™í•˜ëŠ” ì§€ì— ëŒ€í•´ ì„¤ëª…í•œ ê²ƒ. 

## âœ”ï¸ Routerì—ì„œ í•˜ëŠ” ì¼
![RouterWork](img/RouterWork.png)
  
### 1. routing  
    íŒ¨í‚·ì´ ì¶œë°œì§€ì—ì„œ ëª©ì ì§€ë¡œ ì „ë‹¬ë˜ëŠ” ê²½ë¡œë¥¼ ê²°ì •í•˜ëŠ” ê³¼ì •
### 2. forwarding  
![forward](img/forwarding.png)
    * packetì˜ ëª©ì ì§€ê°€ headerì— ì í˜€ìžˆëŠ”ë° ì´ê²ƒì„ ë³´ê³  ì „ë‹¬. 
    * forwarding tableì— ë‚´ìš©ì´ ìžˆì–´ì„œ ì´ê²ƒì„ ë³´ê³  ë§¤ì¹­ì‹œì¼œì„œ ë§í¬ë¡œ ì „ë‹¬
    * routing algorithmì´ forwarding tableì„ ë§Œë“¬, ì£¼ì†Œë²”ìœ„ë¡œ í‘œí˜„ë˜ì–´ ìžˆìŒ
#### Longeset prefix matching  
![LPM](img/LPM.png)
ê°€ìž¥ ê¸¸ê²Œ ë§¤ì¹­ë˜ëŠ” entryì™€ ë§¤ì¹­ì‹œí‚´(ì•žì—ì„œë¶€í„° ë´ì„œ prefix)

## âœ”ï¸ IP datagram format

![](img/01.png)

1. `VER (Version)` 
    - IP í”„ë¡œí† ì½œì˜ ë²„ì „ì„ ì˜ë¯¸
    - IPv4ì™€ IPv6ê°€ í˜„ìž¬ ì‚¬ìš©ë˜ê³  ìžˆìœ¼ë©°, 4ìžë¦¬ ë¹„íŠ¸ë¡œ ì´ë£¨ì–´ì ¸ ìžˆìŒ
    - IPv4ì˜ ê²½ìš° 0100, IPv6ì˜ ê²½ìš° 0110ìœ¼ë¡œ í‘œê¸°ë¨
2. `HLEN(Header Length)`
    - í—¤ë”ì˜ ê¸¸ì´ë¥¼ ì•Œë ¤ì£¼ëŠ” ë¶€ë¶„
    - ê°€ìž¥ ë§ˆì§€ë§‰ì— í¬í•¨ë˜ëŠ” ì˜µì…˜ì˜ ê¸¸ì´ì— ë”°ë¼ ì˜µì…˜ì´ ì—†ìœ¼ë©´ 20 ë°”ì´íŠ¸, ìµœëŒ€ë¡œ ì¶”ê°€ë˜ë©´ 60 ë°”ì´íŠ¸
    - ìœ„ì˜ ê·¸ë¦¼ì—ì„  32 ë¹„íŠ¸ì¸ ê²ƒì²˜ëŸ¼ ê·¸ë ¤ì§€ì§€ë§Œ, ê²½ìš°ì— ë”°ë¼ ì˜µì…˜ í•„ë“œê°€ ì—†ì„ ìˆ˜ë„, í›¨ì”¬ í´ ìˆ˜ë„ ìžˆìŒ
3. `Service Type`
    - í•´ë‹¹ ë°ì´í„°ê·¸ëž¨ì˜ ì§€ì—°, ìš°ì„ ìˆœìœ„, ì‹ ë¢°ì„±, ì²˜ë¦¬ëŸ‰ ë“±ì˜ ì •ë³´ë¥¼ ë‹´ê³  ìžˆëŠ” í•„ë“œ
    - 8ë¹„íŠ¸ë¡œ ì´ë£¨ì–´ì ¸ ìžˆìŒ
4. `Total Length`
    - í—¤ë”ì™€ ë°ì´í„° ë¶€ë¶„ì„ í•©í•œ ë°ì´í„°ê·¸ëž¨ì˜ ì „ì²´ ê¸¸ì´
5. `TTL(Time to Live)`
    - ìˆ˜ëª…ì„ ì•Œë ¤ì£¼ëŠ” í•„ë“œ
    - ë°ì´í„°ê·¸ëž¨ì´ ë„¤íŠ¸ì›Œí¬ ìƒì—ì„œ ë‹¤ì–‘í•œ ì´ìœ ë¡œ ëª©ì ì§€ì— ë„ì°©í•˜ì§€ ëª»í•˜ê³  ë„¤íŠ¸ì›Œí¬ë¥¼ ë– ë„ëŠ” ì¼ì´ ìƒê¸¸ ìˆ˜ ìžˆìŒ
    - ì´ëŸ° ì¼ì´ ëŠ˜ì–´ë‚˜ë©´, ë„¤íŠ¸ì›Œí¬ íë¦„ì„ ë°©í•´í•  ìˆ˜ ìžˆê³ , ìƒìœ„ ê³„ì¸µì„ í˜¼ëž€ì‹œí‚¬ ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— ìˆ˜ëª…ì„ ë‹¤í•œ ë°ì´í„°ê·¸ëž¨ì€ ìžë™ìœ¼ë¡œ íê¸°ë¨
6. `Upper Layer`
    - ë„¤íŠ¸ì›Œí¬ ê³„ì¸µì˜ ìƒìœ„ ê³„ì¸µì¸ ì „ì†¡ ê³„ì¸µì´ ì‚¬ìš©í•˜ëŠ” í”„ë¡œí† ì½œì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹´ê³  ìžˆìŒ
    - 8ë¹„íŠ¸ë¡œ êµ¬ì„±
    - ëŒ€í‘œì ìœ¼ë¡œ UDPëŠ” 17, TCPëŠ” 6, ICMPëŠ” 1ì„ ì‚¬ìš©
    - ë¦¬ì‹œë²„ ì¸¡ì—ì„œ ì‚¬ìš©
7. `Header Checksum`
    - í—¤ë”ì— ì˜¤ë¥˜ê°€ ìžˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•œ 16ë¹„íŠ¸ë¡œ ì´ë£¨ì–´ì§„ í•„ë“œ
    - ë°ì´í„° ë§í¬ ê³„ì¸µì—ì„œì˜ Error Controlê³¼ ê°™ì€ ì—­í• 
8. `Source/Destination IP Address`
    - ê°ê° 32ë¹„íŠ¸ë¡œ êµ¬ì„±
    - ì†¡ì‹ ê³¼ ìˆ˜ì‹ ìžì˜ IP ì£¼ì†Œê°€ ê¸°ë¡ë˜ì–´ ìžˆìŒ

## âœ”ï¸ IP Address(IPv4)

![](img/02.png)

- `32 ë¹„íŠ¸`ì˜ ì£¼ì†Œ ì²´ê³„ë¥¼ ê°€ì§„ë‹¤.
- 2^32 ê°œì˜ IP ì£¼ì†Œë¥¼ ê°€ì§ˆ ìˆ˜ ìžˆë‹¤.
- ì‚¬ëžŒì´ ì½ê¸° ì¢‹ê²Œ 8ë¹„íŠ¸ì”© ëŠì–´ì„œ 10ì§„ìˆ˜ë¡œ ë³€í™˜(0~255) í•˜ì—¬ ì£¼ì†Œë¥¼ ì½ëŠ”ë‹¤.
- ë¼ìš°í„°ì™€ ê¸°ê³„ë“¤ì€ 32ë¹„íŠ¸ë§Œ ë³¸ë‹¤.
- IPì£¼ì†ŒëŠ” í˜¸ìŠ¤íŠ¸ì— ë“¤ì–´ìžˆëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í„°íŽ˜ì´ìŠ¤ ìžì²´ë¥¼ ì§€ì¹­í•œë‹¤.

ì»´í“¨í„° ì•ˆì— ë„¤íŠ¸ì›Œí¬ ì¸í„°íŽ˜ì´ìŠ¤ ì¹´ë“œ, nicë¼ê³  ë¶ˆë¦¬ëŠ” ê²Œ ìžˆìŒ. ì˜ˆë¥¼ ë“¤ì–´ ëž¨ ì¹´ë“œë¥¼ ë¼ìš°ëŠ” ê²ƒë„ ë‹¤ ì¸í„°íŽ˜ì´ìŠ¤. ê·¸ëž˜ì„œ IP ì£¼ì†ŒëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ ì§€ì¹­í•˜ëŠ” ì£¼ì†Œì´ë‹¤.

ë³´í†µ ë„¤íŠ¸ì›Œí¬ ì¸í„°íŽ˜ì´ìŠ¤ ì¹´ë“œ í•œ ê°œë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, IP ì£¼ì†Œê°€ í•œ ê°œ ì´ë‹¤. ì»´í“¨í„°ì— ë„¤íŠ¸ì›Œí¬ ì¸í„°íŽ˜ì´ìŠ¤ ì¹´ë“œë¥¼ ì—¬ëŸ¬ ê°œ ë¼ìš°ë©´ IP ì£¼ì†Œë¥¼ ì—¬ëŸ¬ ê°œ ê°€ì§ˆ ìˆ˜ ìžˆëŠ”ë°, ì´ëŸ° ëŒ€í‘œì ì¸ ì˜ˆê°€ ë¼ìš°í„°ì´ë‹¤. ë¼ìš°í„°ëŠ” ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ ì—¬ëŸ¬ ê°œ ë‘ë©´ì„œ, ê°ê° ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ë¼ ìžˆê³ , ê°ê° IP ì£¼ì†Œë¥¼ ê°–ëŠ”ë‹¤.

## âœ”ï¸ Grouping Related Hosts

![Untitled](img/03.png)

ë„¤íŠ¸ì›Œí¬ë“¤ì€ ë¼ìš°í„°ë¡œ ì—°ê²°ë˜ì–´ ìžˆìŒ

ë‹¨ìˆœí•˜ê²Œ IPì£¼ì†Œë¥¼ ë°°ì •í•˜ëŠ” ë°©ë²•ì€ ë§‰ë¬´ê°€ë‚´ë¡œ ë°°ì •í•˜ë©´ ì‰¬ì›€.

### ðŸš¨ BUT ë¬¸ì œì ?

## âœ”ï¸ Scalability Challenge

![Untitled](img/04.png)

ë¼ìš°í„° ì•ˆì— ë“¤ì–´ìžˆëŠ” forwarding tableì´ ì—„ì²­ ì»¤ì§€ëŠ” ë¬¸ì œì  ë°œìƒ

í˜¸ìŠ¤íŠ¸ ë³„ë¡œ ë°©í–¥ì´ ë‹¤ ë‹¤ë¥´ê¸° ë•Œë¬¸

â†’ í˜„ìž¬ IPì£¼ì†ŒëŠ” ì´ë ‡ê²Œ ë§ˆêµ¬ìž¡ì´ë¡œ ë°°ì •í•˜ì§€ ì•ŠìŒ

## âœ”ï¸ Hierarchical Addressing : IP Prefixes

![](img/05.png)

ê³„ì¸µí™”ë¥¼ ì‹œì¼œë†“ìŒ

32ë¹„íŠ¸ IPì£¼ì†ŒëŠ” ë‘ ê³µê°„ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìžˆìŒ

- ë„¤íŠ¸ì›Œí¬ ID(24ë¹„íŠ¸)
- ë„¤íŠ¸ì›Œí¬ì— ì†í•œ í˜¸ìŠ¤íŠ¸ID(8ë¹„íŠ¸) : ê°™ì€ ë„¤íŠ¸ì›Œí¬ì— ì†í•œ í˜¸ìŠ¤íŠ¸ ë“¤ì€ ê°™ì€ ë„¤íŠ¸ì›Œí¬IDë¥¼ ê°€ì§„ë‹¤
- ë„¤íŠ¸ì›Œí¬ID = ì„œë¸Œë„· ID = prefix

## âœ”ï¸ Subnet Mask

![](img/06.png)

ì„œë¸Œë„· ë§ˆìŠ¤í¬ëž€, ì–´ë””ê¹Œì§€ê°€ ë„¤íŠ¸ì›Œí¬ ì•„ì´ë””ì¸ì§€ ë‚˜íƒ€ë‚¸ ê²ƒ

IPì£¼ì†Œì™€ ì„œë¸Œë„· ë§ˆìŠ¤í¬ëŠ” í•­ìƒ ê°™ì´ ë‹¤ë‹˜

## âœ”ï¸ Scalability Improved

![Untitled](img/07.png)

- ê°™ì€ ë„¤íŠ¸ì›Œí¬ì— ì†í•˜ëŠ” hostë“¤ì€ ê°™ì€ subnetì„ ê°€ì§ â†’ forwarding tableì´ ë‹¨ìˆœí•´ì§
- 1.2.3.0/24 ëŠ” ì™¼ìª½ ë„¤íŠ¸ì›Œí¬
- 5.6.7.0/24ëŠ” ì˜¤ë¥¸ìª½ ë„¤íŠ¸ì›Œí¬
- ìƒˆë¡œìš´ host ì¶”ê°€í•  ê²½ìš°, ìƒˆë¡œìš´ forwarding-table entry ì¶”ê°€í•  í•„ìš” ì—†ì´, prefixë§Œ ê°™ë„ë¡ í•˜ì—¬ IP ì£¼ì†Œë¥¼ ë°°ì •í•˜ë©´ ëœë‹¤.

## ê³¼ê±°ì˜ IPì£¼ì†Œ ë°°ì •: Classful Addressing

![](img/08.png)

![](img/09.png)

ì˜ˆì „ì—ëŠ” IP ì£¼ì†Œ prefix ìžì²´ì˜ í´ëž˜ìŠ¤ë¥¼ ë‚˜ëˆ ë†¨ìŠµë‹ˆë‹¤. ê·¸ëž˜ì„œ ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ í´ëž˜ìŠ¤a, í´ëž˜ìŠ¤ b, í´ëž˜ìŠ¤ cê°€ ì¡´ìž¬í–ˆìŠµë‹ˆë‹¤.

class aì— í•´ë‹¹í•˜ëŠ” IP ì£¼ì†Œ ë­‰íƒœê¸°ë“¤ì€ prefixê°€ /8, class bëŠ” /16, class cëŠ” /24 ì´ëŸ° ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œë¥¼ ê°€ì¡ŒìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì•„ì´ë””ê°€ ì•žì— 8, 16, 24 ë¹„íŠ¸ë¼ëŠ” ì–˜ê¸°ì£ . ê·¸ëŸ¬ë‹ˆê¹Œ í´ëž˜ìŠ¤ aì˜ ê²½ìš° /8ì— í•´ë‹¹í•˜ëŠ” ì£¼ì†Œë¥¼ ë°°ì •ë°›ìœ¼ë©´ í˜¸ìŠ¤íŠ¸ë¥¼ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì¸ 2ì˜24ìŠ¹ë§Œí¼ ì´ë¡ ìƒìœ¼ë¡œ ë³´ìœ í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.

aì˜ íŠ¹ì§•ì€ ë¬´ì¡°ê±´ ì•žì—ëŠ” 0ìœ¼ë¡œ ì‹œìž‘í•©ë‹ˆë‹¤. ê·¸ëž˜ì„œ 2ì˜ 7ìŠ¹ì¸ 128ê°œì˜ ê¸°ê´€ì´ ì´ í´ëž˜ìŠ¤aë¼ëŠ” ì–´ë“œë ˆìŠ¤ ê³µê°„ì„ íšë“í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì „ ì„¸ê³„ì— ê¸°ê´€ë“¤ì´ ìˆ˜ë°±ë§Œ ê°œ ì—„ì²­ë‚˜ê²Œ ë§Žì„ í…ë° ê·¸ ì¤‘ì— ë”¸ëž‘ 128ê°œì˜ ê¸°ê´€ë§Œì´ í´ëž˜ìŠ¤ aë¥¼ íšë“í•  ìˆ˜ ìžˆë‹¤ëŠ” ê²ƒ ìžì²´ë„ ë¬¸ì œê°€ ë©ë‹ˆë‹¤. ë˜í•œ hostë¥¼ ë‹¤ ëª» ì”ë‹ˆë‹¤ ì´ê±°ëŠ” ì—„ì²­ë‚˜ê²Œ í° ê³µê°„ì¸ë°, í•œ ê¸°ê´€ì´ ì´ê±¸ ì“¸ ìˆ˜ ìžˆëŠ” í¬ê¸°ê°€ ì•„ë‹™ë‹ˆë‹¤. ì´ë¡œì¸í•´ ì¶”ê°€ì ì¸ ë‚­ë¹„ê°€ ë°œìƒí•©ë‹ˆë‹¤. í´ëž˜ìŠ¤ cëŠ” 2ì˜ 24ìŠ¹ ê°œì˜ ê¸°ê´€ì— ì¤„ ìˆ˜ ìžˆìœ¼ë‹ˆê¹Œ ì–‘ì´ ë§ŽìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ 255ê°œê¹Œì§€ í˜¸ìŠ¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìžˆì–´ì„œ ë„ˆë¬´ ì ì–´ ë¬¸ì œê°€ ë©ë‹ˆë‹¤.

## Classless Inter-Domain Routing(CIDR)

![](img/10.png)

í´ëž˜ìŠ¤ ì—†ëŠ” ê°œë…ì˜ ì£¼ì†Œ ê³µê°„

ì˜ˆì „ì— ë‚˜ì˜¨ í´ëž˜ìŠ¤ ê°œë…ì˜ ë°°ì • ì‹œìŠ¤í…œì´ ë„ˆë¬´ë‚˜ ë¹„íš¨ìœ¨ì ì´ë¼ ì—†ì• ê³  ë‚˜ì˜¨ ê²Œ ë°”ë¡œ ì´ í´ëž˜ìŠ¤ê°€ ì—†ëŠ” ê°œë…ì˜ ì£¼ì†Œ ê³µê°„ ë°°ì •ìž…ë‹ˆë‹¤. ê·¸ëž˜ì„œ Classless Inter-Domain Routingí•´ì„œ ì´ê±¸ ì¤„ì—¬ì„œ CIDRë¼ê³  ë¶ˆë¦¬ëŠ”ë°, í•µì‹¬ì ì¸ ë‹¨ì–´ëŠ” classless ìž…ë‹ˆë‹¤. ê·¸ëž˜ì„œ ë” ì´ìƒ ì´ 8ë¹„íŠ¸ ë‹¨ìœ„ë¡œ prefixê°€ ëŠì–´ì§€ëŠ” ê²Œ ì•„ë‹ˆë¼, ìžìœ ë¡­ê²Œ ëŠì–´ì§€ê²Œ ë©ë‹ˆë‹¤.

![](img/11.png)

ì´ ì˜ˆì—ì„œ ë³´ë©´ prefixê°€ 15ë¹„íŠ¸ ìž…ë‹ˆë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ ì´ëŸ° ê²Œ(12.4.0.0/15) ê°€ëŠ¥í•©ë‹ˆë‹¤.

ê·¸ëž˜ì„œ ê³¼ê±°ì— ì´ëŸ° í´ëž˜ìŠ¤ ê°œë…ì¼ ë•ŒëŠ” ì´ í´ëž˜ìŠ¤cì§œë¦¬ prefixë¥¼ ê°–ê³  ìžˆì—ˆê¸° ë•Œë¬¸ì—, ë„¤íŠ¸ì›Œí¬ ì•ˆì— ìžˆëŠ” ë¼ìš°í„°ë“¤ì˜ í¬ì›Œë”© í…Œì´ë¸” í¬ê¸°ê°€ ì»¸ìŠµë‹ˆë‹¤.

ì™œëƒí•˜ë©´ í¬ì›Œë”© í…Œì´ë¸” ì—”íŠ¸ë¦¬ëŠ” ë„¤íŠ¸ì›Œí¬ì— ì¡´ìž¬í•˜ëŠ” prefixë§Œí¼ ê°–ê³  ìžˆìŠµë‹ˆë‹¤. ê·¸ëž˜ì„œ prefixê°€ ì¤„ë©´ ë„¤íŠ¸ì›Œí¬ ì•ˆì— ë“¤ì–´ìžˆëŠ” ë¼ìš°í„°ë“¤ì˜ í¬ì›Œë”© í…Œì´ë¸” í¬ê¸° ìžì²´ë„ ì¤„ì–´ë“¤ê²Œ ë©ë‹ˆë‹¤.

![](img/12.png)

ê°€ìž¥ ì •í™•í•˜ê²Œ ì¼ì¹˜í•˜ëŠ” prefixì™€ ë§¤ì¹­ëœë‹¤.

## âœ”ï¸ Subnet

![](img/13.png)

ì„œë¸Œë„·ì´ë‚˜ ë„¤íŠ¸ì›Œí¬ë‚˜ ë¹„ìŠ·í•œ ì˜ë¯¸ì¸ë° ì„œë¸Œë„·ì€ ê°™ì€ ì„œë¸Œë„· id, ê°™ì€ prefixë¥¼ ê°€ì§„ IP ì£¼ì†Œ, ê°™ì€ prefixë¥¼ ê°€ì§„, ì¸í„°íŽ˜ì´ìŠ¤ ë””ë°”ì´ìŠ¤ì˜ ì§‘í•©ìž…ë‹ˆë‹¤. ë˜ëŠ” ë¼ìš°í„°ë¥¼ ê±°ì¹˜ì§€ ì•Šê³  ì ‘ê·¼ì´ ê°€ëŠ¥í•œ í˜¸ìŠ¤íŠ¸ë“¤ì˜ ì§‘í•©ìž…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ì´ë¯¸ì§€ì˜ ì™¼ìª½ ì• ë“¤ì€ ì„œë¸Œë„· id, prefixê°€ 223.1.1 ìž…ë‹ˆë‹¤. ê·¸ëž˜ì„œ ì—¬ê¸° ì• ë“¤ì€ ë‹¤ 223.1.1 ê°€ì¡ŒìŠµë‹ˆë‹¤.

ë¼ìš°í„°ê°€ IP ì£¼ì†Œë¥¼ ì¸í„°íŽ˜ì´ìŠ¤ ê°œìˆ˜ë§Œí¼ ê°€ì§€ë‹ˆê¹Œ, ì˜¤ížˆë ¤ ë¼ìš°í„°ëŠ” IP ì£¼ì†Œë¥¼ í˜¸ìŠ¤íŠ¸ ë³´ë‹¤ ë§Žì´ ê°€ì§‘ë‹ˆë‹¤. ë¼ìš°í„° ì§€ê¸ˆ ì¸í„°íŽ˜ì´ìŠ¤ê°€ IP ì£¼ì†Œ 3ê°œì˜ prefixê°€ ë‹¤ë¦…ë‹ˆë‹¤. ì¦‰, ë¼ìš°í„°ëŠ” í•˜ë‚˜ì˜ ì„œë¸Œë„·ì— ì†í•œ ê²Œ ì•„ë‹ˆë¼ ì—¬ëŸ¬ ê°œì˜ ì„œë¸Œë„·ì˜ êµì§‘í•© ìž…ë‹ˆë‹¤. ê·¸ëž˜ì„œ ì´ êµì§‘í•©ì„ í†µí•´ì„œë§Œ ë‹¤ë¥¸ ì§‘í•©ìœ¼ë¡œ ê°ˆ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

![](img/14.png)

ì´ ì˜ˆì‹œì˜ ê²½ìš° subnetì˜ ê°œìˆ˜ëŠ” `6ê°œ` ìž…ë‹ˆë‹¤

- 223.1.1
- 223.1.2
- 223.1.3
- 223.1.7
- 223.1.8
- 223.1.9

## âœ”ï¸ IPv6
- 16ë°”ì´íŠ¸(128ë¹„íŠ¸)ë¡œ êµ¬ì„±


**Why IPv6?**

- IPv4 will be exhausted!! (IPv4ê°€ ê³ ê°ˆë‚  ê¹Œë´ ìƒê¹€.)
- IPv4ëŠ” 2^32 = 4 billion ê°œì˜ IP ì£¼ì†Œë¥¼ ê°€ì§

## âœ”ï¸ Network Address Translation(NAT)

### (IPv4 ê³ ê°ˆ ì•ˆ ë‚˜ëŠ” ì´ìœ )

IPì£¼ì†Œ ê³ ê°ˆ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” íŠ¸ë¦­ ê°™ì€ ê²ƒ â†’ ê·¼ë³¸ì ì¸ í•´ê²° ë°©ë²•ì€ ì•„ë‹˜

![](img/15.png)

IPì£¼ì†Œì˜ ìž¬ì‚¬ìš© í†µí•´ ì—¬ëŸ¬ ì‚¬ëžŒì´ ê°™ì€ ì£¼ì†Œë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ì£¼ì†Œ ê³µê°„ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê²ƒ

![](img/16.png)

ê·¸ëž˜ì„œ NAT ë°©ì‹ì—ì„œëŠ”, ë„¤íŠ¸ì›Œí¬ ë‚´ë¶€ì—ì„œëŠ” ìœ ì¼í•œ IP ì£¼ì†Œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ê·¸ëž˜ì„œ 10.0.0.1, 10.0.0.2. ë‚´ë¶€ì—ì„œëŠ” ìœ ì¼í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë‚´ë¶€ì—ì„œë§Œ ìœ ì¼í•˜ê¸° ë•Œë¬¸ì— ë˜ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ì˜ ë‚´ë¶€ì—ì„œ ì´ IP ì£¼ì†Œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ê·¸ëž˜ì„œ ì´ëŸ¬í•œ IPë¥¼ ê°€ì§„ íŒ¨í‚·ì´ ì™¸ë¶€ë¡œ ë‚˜ê°ˆ ë•ŒëŠ” NAT ê¸°ëŠ¥ì„ í•˜ëŠ” ì´ ê²Œì´íŠ¸ì›¨ì´ ë¼ìš°í„°ì˜ IP ì£¼ì†Œ(ì „ ì„¸ê³„ì ìœ¼ë¡œ ìœ ì¼)ë¡œ ë°”ê¿”ì¤ë‹ˆë‹¤. ë°›ëŠ” ì‚¬ëžŒ ì¸¡ì—ì„œëŠ” ë¼ìš°í„°ì—ì„œ ë©”ì‹œì§€ê°€ ì˜¨ ì¤„ ì••ë‹ˆë‹¤.

ê·¸ëŸ¼ ë‹¤ì‹œ ë¦¬í„´ íŒ¨í‚·ì„ ë³´ë‚¼ ë•Œ ë¼ìš°í„°ë¡œ ë³´ë‚¼ ê²ƒ ìž…ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ë¦¬í„´ íŒ¨í‚·ì´ ë“¤ì–´ì˜¬ ë•ŒëŠ” ë°©ê¸ˆ ì´ ë³€í™˜ ìž‘ì—…ì„ ê·¸ëŒ€ë¡œ ë°˜ëŒ€ë¡œ í•´ì£¼ê²Œ ë©ë‹ˆë‹¤. ì´ê²Œ ë°”ë¡œ NATì˜ ë™ìž‘ ìž…ë‹ˆë‹¤.

![](img/17.png)

ê²Œì´íŠ¸ì›¨ì´ ë¼ìš°í„°ëŠ” NATë¥¼ ë™ìž‘í•˜ê³  ìžˆê³ , ê²Œì´íŠ¸ì›¨ì´ ë¼ìš°í„°ì— IP ì£¼ì†ŒëŠ” ì—¬ëŸ¬ê°œ ìž…ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì¸í„°íŽ˜ì´ìŠ¤ ê°œìˆ˜ë§Œí¼ ìžˆìœ¼ë‹ˆê¹Œ IP ì£¼ì†Œê°€ ì—¬ëŸ¬ ê°œ ìžˆìŠµë‹ˆë‹¤.

ê·¸ëŸ°ë° ì´ ê·¸ë¦¼ ê°™ì€ ê²½ìš°ì—ëŠ” ì´ ê²Œì´íŠ¸ì›¨ì´ ë¼ìš°í„°ëŠ” ì¸í„°íŽ˜ì´ìŠ¤ê°€ ë‘ êµ°ë°ê³ , ê°ìž IP ì£¼ì†Œë¥¼ ê°€ì§€ë©°, ì„œë¸Œë„· ë‘ ê°œì˜ ë©¤ë²„ìž…ë‹ˆë‹¤.

ê·¸ëŸ°ë° ì„œë¸Œë„·ì´ë¼ëŠ” ê±´ ë­ëƒë©´, ê°™ì€ prefix, ê°™ì€ ë„¤íŠ¸ì›Œí¬ ì•„ì´ë””ë¥¼ ê°–ëŠ” ì• ë“¤ì˜ ì§‘í•© ìž…ë‹ˆë‹¤. ê·¸ëŸ¼ ê²°êµ­ì—ëŠ” ë¼ìš°í„°ì˜ í•œ ì¸í„°íŽ˜ì´ìŠ¤ëŠ” ì˜¤ë¥¸ìª½ ì„œë¸Œë„·ì˜ prefixë¥¼ ê°€ì§ˆ ìˆ˜ë°–ì— ì—†ì£ .

ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì—¬ê¸° ì˜¤ë¥¸ìª½ì—ì„œ 10.0.0 ì´ëŸ° prefixë¥¼ ê°€ì§„ë‹¤ë©´, ë§ˆì°¬ê°€ì§€ë¡œ ì´ ì¸í„°íŽ˜ì´ìŠ¤ë„ 10.0.0ì´ë¼ëŠ” prefixë¥¼ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì™¼ìª½ ì„œë¸Œë„·ì€ ë˜ ì£¼ì†Œê°€ ë‹¤ë¦…ë‹ˆë‹¤.

## âœ”ï¸ Dynamic Host Configuration Protocol(DHCP)

**1. ì‚¬ì „ ì§€ì‹.**

ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì— ë“¤ì–´ê°€ì„œ IP ì£¼ì†Œë¥¼ ë³´ë©´, 192.168.1.47. í•­ìƒ ê°™ì´ ë‹¤ë‹ˆëŠ” ì„œë¸Œë„· ë§ˆìŠ¤í¬ëŠ” 255.255.255.0. ë¼ìš°í„°ëŠ” 192.168.1.1. ê·¸ë¦¬ê³  DNSë¼ëŠ” íƒ­ì´ ìžˆìŠµë‹ˆë‹¤. ìš°ë¦¬ê°€ ì¸í„°ë„·ì„ í•˜ê¸° ìœ„í•´ì„œ ê°€ìž¥ ê¸°ë³¸ì ìœ¼ë¡œ ì•Œê³  ìžˆì–´ì•¼ ë˜ëŠ” ì •ë³´ë“¤ìž…ë‹ˆë‹¤. ì¸í„°ë„·ì— ì—°ê²°ë˜ê¸° ìœ„í•´ì„œëŠ” ê°ìž IPì™€ ì„œë¸Œë„· ë§ˆìŠ¤í¬ê°€ ìžˆì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ëž˜ì„œ ì–´ë””ê¹Œì§€ê°€ prefixì¸ì§€, ë„¤íŠ¸ì›Œí¬ ì•„ì´ë””ì¸ì§€ ì•Œë ¤ì¤€ë‹¤ê³  í–ˆëŠ”ë°, ì§€ê¸ˆ 255.255.255.0ë‹ˆê¹Œ ì„œë¸Œë„·ì˜ IDê°€ 192.168.1.0/24 ê°€ ë©ë‹ˆë‹¤.

**2. ê·¸ë¦¼ê³¼ í•¨ê»˜ ì„¤ëª…**

![](img/18.png)

ì™¸ë¶€ë¡œ íŒ¨í‚·ì„ ë³´ë‚´ê¸° ìœ„í•´ì„œ ì „ë‹¬í•´ì•¼ í•  ë¼ìš°í„°ì˜ IP ì£¼ì†Œê°€ "ë„¤íŠ¸ì›Œí¬ ì„¸íŒ…"ì— ì í˜€ìžˆìŠµë‹ˆë‹¤. Destinationì— êµ¬ê¸€ ì ì–´ì„œ, ë¼ìš°í„°í•œí…Œ ë³´ë‚´ì•¼ ê°‘ë‹ˆë‹¤. ë¼ìš°í„°ê°€ ì—†ìœ¼ë©´ í¬ì›Œë”©, í¬ì›Œë”© í…Œì´ë¸”, ë¼ìš°íŒ…ë„ ì—†ê²Œ ë©ë‹ˆë‹¤. ë¼ìš°í„°ëŠ” ì£¼ì†Œë¥¼ ë³´ë©´ ê°™ì€ ë„¤íŠ¸ì›Œí¬ì— ìžˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ê°™ì€ ë„¤íŠ¸ì›Œí¬ ì¤‘ì—ì„œ ë³´í†µ ì²« ë²ˆì§¸ìž…ë‹ˆë‹¤. (ì•„ë‹Œ ê²½ìš°ë„ ìžˆìŠµë‹ˆë‹¤.)

ê·¸ë¦¬ê³  ì´ DNSëŠ” ìš°ë¦¬ê°€ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì—´ì–´ê°€ì§€ê³  www.naver.comì„ ê²€ìƒ‰í•˜ë©´ ê·¸ë•Œ íŒ¨í‚·ì´ ë°”ë¡œ ë„¤ì´ë²„ë¡œ ê°€ëŠ” ê²Œ ì•„ë‹ˆë¼, ë„¤ì´ë²„ì˜ IP ì£¼ì†Œë¥¼ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ê·¸ IP ì£¼ì†Œë¥¼ ì•Œê¸° ìœ„í•´ì„œ ë¡œì»¬ ë„¤ìž„ ì„œë²„ì˜ IP ì£¼ì†Œê°€ DNS íƒ­ì— ì í˜€ ìžˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° DNS ì£¼ì†ŒëŠ” ë¼ìš°í„° ì£¼ì†Œëž‘ ê°™ìŠµë‹ˆë‹¤. ì¦‰, ë¡œì»¬ ë„¤ìž„ ì„œë²„ í”„ë¡œì„¸ìŠ¤ê°€ ë¼ìš°í„°ì—ì„œ ë™ìž‘í•˜ê³  ìžˆìŠµë‹ˆë‹¤.

Dynamic Host Configuration Protocol(DHCP)ì—ì„œ ê°€ìž¥ ì¤‘ìš”í•œ ë‹¨ì–´ëŠ” host configuration ì¦‰, ìš°ë¦¬ê°€ ë…¸íŠ¸ë¶ ì‚¬ìš©í•  ë•Œ ì œì¼ ì²˜ìŒì— configí•˜ëŠ” ê·¸ëŸ° ì¼ì„ í•´ì£¼ëŠ” í”„ë¡œí† ì½œ ì´ë¼ëŠ” ê²ë‹ˆë‹¤. dynamicí•˜ê²Œ í•œë‹¤ëŠ” ì–˜ê¸°ëŠ” ë™ì ìœ¼ë¡œ ì•Œì•„ì„œ ì´ëŸ° ì •ë³´ë“¤ì„ ìž¥ì†Œë§ˆë‹¤ ë‹¤ë¥´ê²Œ ë°›ì•„ì™€ ì£¼ëŠ”ê²ë‹ˆë‹¤. ë°˜ëŒ€ë¡œ ìžì‹ ë§Œì˜ ê³ ì •ëœ IPì™€ ë¼ìš°í„°ë¥¼ ì“°ëŠ” ê²½ìš°ë„ ìžˆìŠµë‹ˆë‹¤. Static IPë¼ê³  ì§ì ‘ ì„¤ì •ì„ í•˜ê¸°ë„ í•©ë‹ˆë‹¤.

> How does host get IP address?
> 
> 
> 1. ì§ì ‘ì„¤ì • í•œë‹¤.
> 
> 2. DHCPê°€ ìžë™ìœ¼ë¡œ ì„¤ì •í•´ ì¤€ë‹¤.


## 2. DHCP Client-Server Scenario

> goal: í˜¸ìŠ¤íŠ¸ê°€ ë¹ ë¥´ê²Œ networkì— ì ‘ê¸€í• ìˆ˜ ìžˆê²Œ ë„ì™€ì¤€ë‹¤.
> 
> - ì‚¬ìš©ì¤‘ì´ë©´ ì•Œì•„ì„œ ì¶”ê°€ ì‚¬ìš© ê°±ì‹ 
> - ì´ë¯¸ ì‚¬ìš©í–ˆë˜ IP ì£¼ì†Œê°€ ìžˆìœ¼ë©´ ë‹¤ì‹œ ìž¬ì‚¬ìš©
> - ëª¨ë°”ì¼ì—ì„œ DHCP ìžë™ìœ¼ë¡œ ì§€ì›.

![](img/19.png)

![](img/20.png)

DHCP discoverì€ broadcastë¡œ DHCP ì„œë²„ê°€ ìžˆëŠ”ì§€ ìš”ì²­ í•˜ëŠ” ê²ƒ ìž…ë‹ˆë‹¤. DHCP discover ë©”ì‹œì§€ë¥¼ ë³´ë©´ ì†ŒìŠ¤ ì£¼ì†ŒëŠ” ì•„ì§ IP ì£¼ì†Œë¥¼ í• ë‹¹ ë°›ì§€ ëª»í–ˆê¸° ë•Œë¬¸ì— 0.0.0.0 ìž…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ëª©ì ì§€ëŠ” IPê°€ 255.255.255.255 ì´ê±° 32 bitë¡œ ë´¤ì„ ë•ŒëŠ” ì „ë¶€ ë‹¤ 1 ìž…ë‹ˆë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ ëª¨ë“  address ë¹„íŠ¸ê°€ 1ì¸ ê²½ìš° broadcast ìž…ë‹ˆë‹¤.

broadcastëŠ” ì„œë¸Œë„·ì— ìžˆëŠ” ëª¨ë“  ë©¤ë²„ë“¤ì—ê²Œ ë³´ë‚´ëŠ” ê²ƒ ìž…ë‹ˆë‹¤. DHCP ì„œë²„ëŠ” í¬íŠ¸ ë„˜ë²„ëŠ” 67ë²ˆ ìž…ë‹ˆë‹¤. ê·¸ë¦¬ê³  transaction IDëŠ” offerì™€ requestë¥¼ ìœ„í•´ì„œ ip ëŒ€ì‹ ìœ¼ë¡œ ìš°ë¦¬ë¥¼ íŠ¹ì •í•˜ê¸° ìœ„í•´ ëžœë¤í•˜ê²Œ ë¶€ì—¬ë°›ëŠ” ë²ˆí˜¸ìž…ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ì´ DHCP discover ë©”ì‹œì§€ë¥¼ ì´ ì„œë¸Œë„·ì— ìžˆëŠ” ëª¨ë“  ë©¤ë²„ë“¤ì´ ë°›ìŠµë‹ˆë‹¤.

ê·¸ëŸ°ë° ì´ DHCP discover ë©”ì‹œì§€ë¥¼ ì´ ì„œë¸Œë„·ì— ì¡´ìž¬í•˜ëŠ” ëª¨ë“  í˜¸ìŠ¤íŠ¸ë“¤ì´ ë°›ì§€ë§Œ, DHCP ì„œë²„ë§Œ ë°›ì•„ë“¤ì´ê³  ë‚˜ë¨¸ì§€ëŠ” ë“œëží•˜ê²Œ ë©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ 67ë²ˆ í¬íŠ¸ë¥¼ í–¥í•´ì„œ ë©”ì‹œì§€ê°€ ë³´ë‚´ì§€ëŠ”ë°, DHCP ì„œë²„ê°€ ëŒê³  ìžˆëŠ” ë©¤ë²„ë§Œ 67ë²ˆ í¬íŠ¸ë¥¼ ì—´ì–´ì„œ listení•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” í¬íŠ¸ë¥¼ ì—´ì§€ ì•Šê³  ì„œë²„ë¥¼ ëŒë¦¬ì§€ ì•Šê³  ìžˆê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤. ê·¸ëž˜ì„œ ì¤‘ê°„ì— 67ë²ˆ í¬íŠ¸ê°€ ì—†ì–´ì„œ ë“œëžë©ë‹ˆë‹¤.

ê·¸ëž˜ì„œ 67ë²ˆ í¬íŠ¸ë¥¼ ì—´ê³  ê¸°ë‹¤ë¦¬ê³  ìžˆëŠ” DHCP ì„œë²„ë§Œ ì´ discover ë©”ì‹œì§€ë¥¼ ë°›ì•„ì„œ offerë¥¼ ì¤ë‹ˆë‹¤. offer ë©”ì‹œì§€ì— source IPì™€ í¬íŠ¸ ë„˜ë²„ëŠ” ì„œë²„ ìžì‹  ì´ê³ , destinationì€ broadcast ìž…ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì•„ì§ ìš°ë¦¬ëŠ” IPë¥¼ í• ë‹¹ ë°›ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— broadcastë¥¼ í•˜ê³ , transaction IDì™€ 68ë²ˆ í¬íŠ¸ê°€ ì—´ë ¤ìžˆëŠ” ê²ƒìœ¼ë¡œ ìš°ë¦¬ë¥¼ íŠ¹ì •ì§“ê²Œ ë©ë‹ˆë‹¤.

offerì— ë‹´ê¸´ ì˜ë¯¸ëŠ” ì•žìœ¼ë¡œ ë„ˆëŠ” ë‚´ê°€ ë¶€ì—¬í•œ ìƒˆë¡œìš´ ì£¼ì†Œë¥¼ ì§€ê¸ˆë¶€í„° 1ì‹œê°„ ë™ì•ˆ ì‚¬ìš©ì„ í•  ìˆ˜ ìžˆë‹¤ëŠ” offerë¥¼ ì£¼ëŠ” ê²ë‹ˆë‹¤. ê·¸ëŸ¼ ìš°ë¦¬ëŠ” ì´ offerë¥¼ ë°›ì•„ì„œ, ì´ offerê°€ ë§ˆìŒì— ë“¤ë©´ offerë¥¼ ìˆ˜ë½í•©ë‹ˆë‹¤. ìˆ˜ë½í•œë‹¤ëŠ” ì˜ë¯¸ë¡œ ë‹¤ì‹œ ì´ offerì— ëŒ€í•œ requestë¥¼ ë³´ë‚´ì•¼ í•©ë‹ˆë‹¤.

ì´ offerì— ëŒ€í•œ request ë³´ë‚¼ ë•Œ, ì†ŒìŠ¤ëŠ” ì•„ì§ ì´ë¦„ì´ ì—†ìŠµë‹ˆë‹¤. ì™œëƒë©´ ì•„ì§ê¹Œì§€ ì´ IPë„ í™•ì •ëœ ê²Œ ì•„ë‹ˆê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤. ê·¸ëž˜ì„œ ì†ŒìŠ¤ ì£¼ì†ŒëŠ” 0.0.0.0ì´ê³ , ë³´ë‚´ì¤€ IPë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ëŠ” ì˜ë¯¸ë¡œ ì•„ê¹Œì˜ transaction IDì—ì„œ í•˜ë‚˜ í”ŒëŸ¬ìŠ¤ 1 ì‹œì¼œì„œ requestì˜ ì˜ë¯¸ë¡œ ë³´ë‚´ê²Œ ë©ë‹ˆë‹¤. ê·¸ëž˜ì„œ ì´ê²Œ ì‘ë‹µì´ ì˜¤ë©´ ìš°ë¦¬ëŠ” ì´ì œë¶€í„° ì´ IP ì£¼ì†Œë¥¼ ìš°ë¦¬ì˜ IPë¡œ ì‚¬ìš©í•˜ê²Œ ë˜ê³  í†µì‹ ì´ ê°€ëŠ¥í•´ ì§‘ë‹ˆë‹¤. offerì—ëŠ” ë¶€ì—¬í•  IP ì£¼ì†Œë¿ë§Œ ì•„ë‹ˆë¼, ë¼ìš°í„° IP, DNS IPë„ ë“¤ì–´ ìžˆìŠµë‹ˆë‹¤.

offerë§Œ ë°›ì•„ë„ ë  ê²ƒ ê°™ì€ë° offerì— requestí•˜ëŠ” ì´ìœ ê°€ ìžˆìŠµë‹ˆë‹¤. discover ë©”ì‹œì§€ëŠ” "ë„ì™€ì£¼ì„¸ìš”." ë¼ê³  ìš”ì²­í•œ ê²ƒìž…ë‹ˆë‹¤. ê·¸ëŸ°ë° ë³´í†µì˜ ê²½ìš°ëŠ” ì„œë¸Œë„· ì•ˆì— DHCP ì„œë²„ê°€ í•œ ê°œ ìžˆì§€ë§Œ, ì–´ë–¤ ê²½ìš°ëŠ” ì„œë²„ê°€ ì—¬ëŸ¬ ê°œ ìžˆì„ ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤. ë§Œì•½ ì„œë²„ê°€ ë‘ ê°œë©´ ê°ê° ë‘ê°œì˜ offerê°€ ì˜µë‹ˆë‹¤. ê·¸ í›„ offerë“¤ ì¤‘ì— í•œê°œë¥¼ ì„ íƒí•˜ê²Œ ë©ë‹ˆë‹¤.

discover ë©”ì‹œì§€ì˜ destinationì´ ë‹¤ 255.255.255.255ì¸ ê²ƒì— ëŒ€í•´ì„œ ì¶”ê°€ ì„¤ëª…í•˜ìžë©´ ì—¬ê¸° DHCP requestì˜ destinationë„ broadcast ìž…ë‹ˆë‹¤. destinationì—ë‹¤ê°€ offerë¥¼ ë³´ë‚¸ DHCP ì„œë²„ ì£¼ì†Œ ì“°ë©´ ì•ˆ ë˜ëŠ” ì´ìœ ëŠ” ë‚´ë¶€ì— DHCP ê¸°ëŠ¥ì„ í•˜ëŠ” ì„œë²„ê°€ ì—¬ëŸ¬ ê°œ ìžˆì„ ìˆ˜ê°€ ìžˆì–´ì„œ ìš°ë¦¬í•œí…Œ ì¤€ offerê°€ ì„ íƒì´ ì•ˆ ëë‹¤ëŠ” ê±¸ ê°„ì ‘ì ìœ¼ë¡œ ì•Œë ¤ì£¼ê¸° ìœ„í•´ì„œ ì €ë ‡ê²Œ í•˜ëŠ” ê²ƒ ìž…ë‹ˆë‹¤.

## âœ”ï¸ IP Fragmentation & Reassembly

![](img/21.png)

ê° ë§í¬ë³„ë¡œ ë§í¬ê°€ í•œêº¼ë²ˆì— í•œ ë²ˆì— ë³´ë‚¼ ìˆ˜ ìžˆëŠ” ê·¸ ë°ì´í„° ìœ ë‹›ì˜ ë§¥ì‹œë©ˆ ì‚¬ì´ì¦ˆê°€ ì •í•´ì ¸ ìžˆìŠµë‹ˆë‹¤. ê·¸ê±¸ ìš°ë¦¬ê°€ MTU, maximum transfer unitì´ë¼ê³  ë¶ˆë¦¬ëŠ”ë° ì´ MTUëŠ” ë§í¬ ë ˆì´ì–´ ê¸°ìˆ ë§ˆë‹¤ ë‹¤ ë‹¤ë¦…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì¸í„°ë„·, ì™€ì´íŒŒì´, 3g ì•„ë‹ˆë©´ ì˜µí‹±, ê´‘ ì¼€ì´ë¸” ì´ëŸ° ì• ë“¤ì´ ë‹¤ ë§í¬ì´ê³  MTUê°€ ë‹¤ ë‹¤ë¦…ë‹ˆë‹¤.

MTUì˜ ì˜ˆë¥¼ ë“¤ë©´ 4000ë°”ì´íŠ¸ì§œë¦¬ íŒ¨í‚·ì„ senderê°€ ë³´ëƒˆëŠ”ë°, íŠ¹ì • ë§í¬ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìžˆëŠ” maximum transfer unitì´ ì˜ˆë¥¼ ë“¤ë©´ 1500 ë°”ì´íŠ¸ë¼ë©´ ë³´ë‚´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ í˜„ìž¬ ì¸í„°ë„· ë²„ì „ IPv4ì—ì„œëŠ” ì²˜ë¦¬í•  ìˆ˜ ìžˆëŠ” MTUë³´ë‹¤ ë” í° ì‚¬ì´ì¦ˆì˜ íŒ¨í‚·ì´ ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ ê±°ê¸°ì„œ ë°”ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.

MTU ì‚¬ì´ì¦ˆì— ë§žëŠ” ë…ë¦½ì ì¸ ì‚¬ì´ì¦ˆì˜ í”„ë ˆìž„ìœ¼ë¡œ ë°”ë€Œì–´ì„œ ì§„í–‰ì´ ë©ë‹ˆë‹¤. ê·¸ëž˜ì„œ ì–˜ë„¤ë“¤ì€ ê°ìž ì´ì œ ì„œë¡œ ë‹¤ë¥¸ íŒ¨í‚·ì´ ë˜ê³  ë§ˆì§€ë§‰ì— í•©ì²´í•´ì„œ ë‹¤ì‹œ ì›ëž˜ íŒ¨í‚·ìœ¼ë¡œ ëŒì•„ì˜µë‹ˆë‹¤. ì´ëŸ° fragmentation, assembly ìž‘ì—…ì„ ìœ„í•´ì„œ í•„ìš”í•œ ê²ƒë“¤ì´ ID, flag, offset ìž…ë‹ˆë‹¤.

![](img/22.png)

Senderê°€ IP íŒ¨í‚·ì„ ìƒì„±í•´ì„œ í—¤ë”ê°€ ìžˆê³  ë°ì´í„°ê°€ ìžˆìŠµë‹ˆë‹¤. ìœ„ ê·¸ë¦¼ì€ í—¤ë” í•„ë“œ ì¤‘ì— í•˜ë‚˜ê°€ 4000 ë°”ì´íŠ¸ì§œë¦¬ì¸ íŒ¨í‚· length ìž…ë‹ˆë‹¤. IDëŠ” íŒ¨í‚·ë³„ë¡œ ì•ˆê²¹ì¹˜ê²Œ senderê°€ ì •í•˜ê²Œ ë©ë‹ˆë‹¤.

ì´ íŒ¨í‚·ì´ ì‚¬ì´ì¦ˆëŠ” 4000, IDëŠ” xì´ê³  ìˆ«ìž ìž…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ flagëŠ” ì²«ë²ˆì§¸ fragment ë’¤ë¡œ ì¶”ê°€ fragment ì˜¤ëŠ”ì§€ ì˜ë¯¸í•©ë‹ˆë‹¤. flagê°€ ì²˜ìŒ ë§Œë“¤ì–´ì¡Œì„ ë•ŒëŠ” fragmentê°€ ì•ˆ ëœ ê±°ë‹ˆê¹Œ 0 ìž…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë§ˆì§€ë§‰ fragementëŠ” fragmentê°€ ëë‚œ ê²ƒ ì´ë‹ˆê¹Œ 0 ìž…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ì´ 4ì²œ ë°”ì´íŠ¸ì§œë¦¬ íŒ¨í‚·ì´ MTU 1500ì¸ ë§í¬ë¥¼ ë§Œë‚¬ë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤. ì´ 4000 ë°”ì´íŠ¸ëŠ” í—¤ë”ì™€ ë°ì´í„°ë¥¼ í¬í•¨í•œ ì „ì²´ë¥¼ ì˜ë¯¸ í•©ë‹ˆë‹¤. í—¤ë” í¬ê¸°ê°€ 20ë°”ì´íŠ¸ ìž…ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ì‹¤ì œì ìœ¼ë¡œ ë°ì´í„°ëŠ” 3980ë°”ì´íŠ¸ ì´ë¯€ë¡œ ë§í¬ì˜ MTU 1500 ë³´ë‹¤ í¬ë¯€ë¡œ ë‚˜ëˆ ì ¸ì•¼ í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  offsetì€ ë§Œì•½ì— fragment ëœ ê²½ìš°ì— ì²« ë²ˆì§¸ ì‹œìž‘ ë¶€ë¶„ì´ ì „ì²´ íŒ¨í‚·ì—ì„œ ì–´ëŠ ì •ë„ì˜ ìœ„ì¹˜ë¥¼ ì°¨ì§€í•˜ëŠ”ì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì¦‰, offsetì€ ë‘ë²ˆì§¸ fragementëŠ” ì›ëž˜ ê¸°ì¡´ì˜ ë°ì´í„°ì—ì„œ ìž˜ë ¤ì ¸ì„œ ì‹œìž‘í•  ê²ƒ ì¸ë° ìž˜ë¦° ë¶€ë¶„ì´ ì–´ë””ì¸ì§€ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì•„ëž˜ì˜ ê·¸ë¦¼ì—ì„œ ì¶”ê°€ì„¤ëª…ì„ í•˜ê² ìŠµë‹ˆë‹¤.

![](img/23.png)

ì²« ë²ˆì§¸ fragment ë³´ë©´, lengthëŠ” 1500ìœ¼ë¡œ MTU ì‚¬ì´ì¦ˆì— ë§žê²Œ ì²« ë²ˆì§¸ê°€ ë‚˜ì˜¤ê³  IDëŠ” x ìž…ë‹ˆë‹¤. flagëŠ” 1ë¡œ ë°”ë€ë‹ˆë‹¤. ë‚´ ë’¤ì— fragment ëœ ê²Œ ìžˆë‹¤ëŠ” ê²ƒ ìž…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‚˜ì˜ offsetì€ ë‚˜ëŠ” ì œì¼ ì•žì´ë‹ˆê¹Œ 0ì´ ë©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ë‘ë²ˆ ì§¸ fragmentê°€ ë˜ ë‹¤ë¥¸ íŒ¨í‚·ìœ¼ë¡œ ë”± ë³€í•˜ê³ , length: 1500, ID = x, flag = 1 ìž…ë‹ˆë‹¤. offsetì€ ì›ëž˜ ë°ì´í„° ì‚¬ì´ì¦ˆëŠ” 3980 ë°”ì´íŠ¸ ì˜€ëŠ”ë°, ìª¼ê°œê°€ì§€ê³  ì²« ë²ˆì§¸ fragmentì— 1480ë°”ì´íŠ¸ ë“¤ì–´ê°”ìŠµë‹ˆë‹¤. ë‹¤ìŒ fragmentë„ 1480 ë°”ì´íŠ¸ ë“¤ì–´ê°”ì£ . ê·¸ëŸ¬ë‹ˆê¹Œ 1480ì„ ì ìœ¼ë©´ ë˜ëŠ”ë°, í•„ë“œ ë¹„íŠ¸ ìˆ˜ ì¤„ì´ê¸° ìœ„í•´ 8ì„ ë‚˜ëˆ ì„œ ì ì–´ì¤ë‹ˆë‹¤. ê·¸ëž˜ì„œ 3ë¹„íŠ¸ê°€ ì¤„ê²Œ ë©ë‹ˆë‹¤.

Fragmentì˜ ì´ëŸ¬í•œ ì •ë³´ë¡œ ë‚˜ì¤‘ì— ë³‘í•©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ ì´ê²Œ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ë¶„ë¦¬ë¥¼ í–ˆëŠ”ì§€ ê¸°ë¡í•´ë†“ëŠ” ê²ƒ ìž…ë‹ˆë‹¤. ì¶”ê°€ë¡œ ë§Œì•½ì— ë¶„ë¦¬ë¼ì„œ ë…ë¦½ì ì¸ íŒ¨í‚·ì´ ë˜ì„œ ê°€ëŠ”ë° ì¤‘ê°„ì— í•˜ë‚˜ê°€ ì—†ì–´ì§€ë©´ reassembly(ìž¬ê²°í•©)ì´ ì•ˆë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ì²« ë²ˆì§¸ëž‘ ì„¸ ë²ˆì§¸ëŠ” ê°”ëŠ”ë° ë‘ ë²ˆì§¸ê°€ ì‚¬ë¼ì§„ ê²½ìš° ìž…ë‹ˆë‹¤. reassembly(ìž¬ê²°í•©)ê°€ ì•ˆ ë˜ë©´ íŒ¨í‚·ì´ ì™„ì„±ì´ ì•ˆ ëìœ¼ë‹ˆê¹Œ, ìœ„ë¡œ ëª» ì˜¬ë¦½ë‹ˆë‹¤. ê·¸ëŸ°ë° reassemblyê°€ ì•ˆ ë˜ë‹ˆê¹Œ, ì—†ëŠ” íŒ¨í‚·ì´ ë©ë‹ˆë‹¤. ê·¸ëž˜ì„œ ë‚˜ì¤‘ì— TCPì—ì„œ íƒ€ì´ë¨¸ í„°ì§€ê³ , ìœ„ì—ì„œ ì•Œì•„ì„œ ìž¬ì „ì†¡ì„ í•©ë‹ˆë‹¤.

## âœ”ï¸ Internet Control Message Protoco(ICMP)

- í˜¸ìŠ¤íŠ¸ì™€ ë¼ìš°í„° ê°„ ë„¤íŠ¸ì›Œí¬ ë ˆë²¨ì—ì„œ ë°ì´í„° ì „ì†¡ê³¼ ê´€ë ¨ëœ ë¬¸ì œë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í”„ë¡œí† ì½œ
- ìš©ë„
  - ì˜¤ë¥˜ ë³´ê³ 
  - ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ í‰ê°€í•˜ê¸° ìœ„í•œ ì§„ë‹¨ ë„êµ¬

![](img/24.png)

**ICMP message: type, code plus first 8 bytes of IP datagram causing error**

íƒ€ìž… 11ë²ˆ TTL : TTLì´ 0ì´ë˜ì„œ ë²„ë ¸ë‹¤ê³  ì•Œë ¤ì¤˜ì•¼ í•œë‹¤.

## âœ”ï¸ Traceroute

- ì¸í„°ë„·ì„ í†µí•´ ê±°ì¹œ ê²½ë¡œ í‘œì‹œ, êµ¬ê°„ì˜ ì •ë³´ ê¸°ë¡, ì¸í„°ë„· í”„ë¡œí† ì½œ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ íŒ¨í‚·ì˜ ì „ì†¡ ì§€ì—°ì„ ì¸¡ì •í•˜ê¸° ìœ„í•œ ì»´í“¨í„° ë„¤íŠ¸ì›Œí¬ ì§„ë‹¨ ìœ í‹¸ë¦¬í‹°

![](img/25.png)


## âœ”ï¸ Transition From IPv4 to IPv6

- **Tunneling(í„°ë„ë§)** : IPv4ì™€ IPv6ë¥¼ ê°™ì´ ì‚¬ìš©í• ìˆ˜ ìžˆê²Œ í•˜ëŠ” ê¸°ìˆ 


![](img/26.png)

![](img/27.png)

----

## âœ”ï¸ Routing Algorithms


### 1. Link-state algorithm

- ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜

![](img/29.png)

![](img/30.png)

### 2. Distance-vector algorithm

- ë²¨ë§Œ-í¬ë“œ ë°©ì •ì‹ (dynamic programming) ê¸°ë°˜

![](img/31.png)

> ìœ„ ê·¸ë¦¼ì— ë”°ë¥´ë©´ ë¼ìš°í„°ëŠ” ìžì‹ ê³¼ ì—°ê²°ëœ ë¼ìš°í„° í•˜ë‚˜ì˜ ë¹„ìš©ë§Œ ê³„ì‚°ì„ í•  ìˆ˜ ìžˆë‹¤.
> 

![](img/32.png)

![](img/33.png)
